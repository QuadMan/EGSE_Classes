<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:l="clr-namespace:Egse.Defaults"
        xmlns:d="clr-namespace:Egse.Devices" 
        xmlns:b="clr-namespace:Egse.Wpf.Behaviors"
        xmlns:System="clr-namespace:System;assembly=mscorlib" x:Class="Egse.Defaults.ControlBukWindow"
        FontFamily="{StaticResource BaseFontFamily}"
        FontSize="{StaticResource BaseFontSize}"
        Closing="Window_Closing"
        Height="800"
        Title="Команды управления БУК"
        Visibility="{Binding IsShowControlBuk, Converter={StaticResource BooleanToVisibilityConverter}, Mode=TwoWay}">
    <StackPanel x:Name="GridControlBuk"
        Background="{StaticResource BackBrush}"
        Margin="4">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Content="Команда" Grid.ColumnSpan="2"
                Template="{StaticResource FlatLabel}"/>
            <Label Content="Настройки" Grid.Column="2" Grid.ColumnSpan="6"
                Template="{StaticResource FlatLabel}"/>


            <Label Content="Управление" Grid.Column="8"
                Template="{StaticResource FlatLabel}"/>
        </Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Получить кадр"
                Style="{StaticResource FlatHeader}"/>
            <Label Grid.Column="2" Grid.ColumnSpan="6"
                Template="{StaticResource FlatLabel}"/>
            <CheckBox Grid.Column="2" Grid.ColumnSpan="6" VerticalAlignment="Center"
                IsChecked="{Binding IsIssueTest}"
                Content="Запрашивать кадры в тестовом режиме"/>

            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueGetFrame}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Порог для определения ЗНЩ"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Тип алгоритма">
                    <TextBox Text="{Binding AlgoType}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Порог для определения ЗНЩ">
                    <TextBox Text="{Binding Threshold}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Параметр 1">
                    <TextBox Text="{Binding Param1}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Параметр 2">
                    <TextBox Text="{Binding Param2}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Параметр 3">
                    <TextBox Text="{Binding Param3}" TabIndex="3"/>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdThreshold}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Получить телеметрию БУК"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White"/>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdGetTele}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Выбрать детектор"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Детектор">
                    <ComboBox IsReadOnly="False" 
                        IsEditable="False"
                        Style="{StaticResource ComboBoxInError}"
                        b:WatermarkComboBox.EnableWatermark="True"
                        b:WatermarkComboBox.Label=" "
                        b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"  
                        TabIndex="9"
                              SelectedIndex="{Binding SelDetector}">
                        <System:String>УФЕС</System:String>
                        <System:String>ВУФЕС</System:String>
                        <System:String>СДЩ</System:String>
                    </ComboBox>
                </GroupBox>
                <CheckBox Grid.Column="2" Grid.ColumnSpan="6" VerticalAlignment="Center"
                    IsChecked="{Binding PwrDetector}"
                          Content="Питание"/>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdSelDetector}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Конфигурация БУК"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Тип параметров">
                    <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                    <ComboBox IsReadOnly="False" 
                                IsEditable="False"
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                                SelectedIndex="{Binding SelConf}"
                                TabIndex="9">
                            <System:String>Команда не будет выполнена</System:String>
                            <System:String>Параметры БУК</System:String>
                            <System:String>Параметры КВВ</System:String>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Параметры БУК">
                    <StackPanel Orientation="Horizontal">
                        <GroupBox Header="Режим работы">
                            <ComboBox IsReadOnly="False" 
                                IsEditable="False"
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                                SelectedIndex="{Binding ModeConf}"
                                TabIndex="9">
                                <System:String>Нормальный</System:String>
                                <System:String>Тестовый</System:String>
                            </ComboBox>
                        </GroupBox>
                        <GroupBox Header="Параметр сжатия">
                            <ComboBox IsReadOnly="False" 
                                IsEditable="False"                               
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                               SelectedIndex="{Binding CompressConf}"
                                TabIndex="9">
                                <System:String>Нет сжатия</System:String>
                                <System:String>Есть сжатие</System:String>
                                <System:String>Есть сжатие с параметром 1</System:String>
                            </ComboBox>
                        </GroupBox>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Параметры КВВ">
                    <StackPanel Orientation="Horizontal">
                        <GroupBox Header="Линия отправки в КВВ">
                            <ComboBox IsReadOnly="False" 
                                IsEditable="False"
                                
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                                SelectedIndex="{Binding LineSendConf}"
                                TabIndex="9">
                                <System:String>Основная</System:String>
                                <System:String>Резервная</System:String>
                            </ComboBox>
                        </GroupBox>
                        <GroupBox Header="Линия приема от КВВ">
                            <ComboBox IsReadOnly="False" 
                                IsEditable="False"
                               
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                                SelectedIndex="{Binding LineRecvConf}"
                                TabIndex="9">
                                <System:String>Основная</System:String>
                                <System:String>Резервная</System:String>
                            </ComboBox>
                        </GroupBox>
                        <GroupBox Header="Активация">
                            <ComboBox IsReadOnly="False" 
                                IsEditable="False"
                               
                                Style="{StaticResource ComboBoxInError}"
                                b:WatermarkComboBox.EnableWatermark="True"
                                b:WatermarkComboBox.Label=" "
                                b:WatermarkComboBox.LabelStyle="{StaticResource WatermarkLabelStyle}"
                                SelectedIndex="{Binding ActivateConf}"
                                TabIndex="9">
                                <System:String>Активировать КВВ1</System:String>
                                <System:String>Активировать КВВ2</System:String>
                            </ComboBox>
                        </GroupBox>
                        <CheckBox IsChecked="{Binding ExchangeConf}" VerticalAlignment="Center" Content="Опрос КВВ"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdConfig}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Открытие затворов"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Номер затвор">
                    <TextBox Text="{Binding NumberShutter}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Длительность открытия затвора">
                    <TextBox Text="{Binding ShutterTime}" TabIndex="3"/>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdShutter}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Управление засветкой"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Номер засветки">
                    <TextBox Text="{Binding NumberLight}" TabIndex="3"/>
                </GroupBox>
                <GroupBox Header="Длительность засветки">
                    <TextBox Text="{Binding LightTime}" TabIndex="3"/>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdLight}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Выдать УКС в КВВ"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="УКС">
                    <TextBox Text="{Binding CmdBytes, Converter={StaticResource BytesToStrConverter}, ValidatesOnDataErrors=True}" TabIndex="3"/>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueCmdSend}" TabIndex="6"/>
        </Grid>
        <Separator/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Grid.ColumnSpan="2"
                Content="Ручное управление детектором"
                Style="{StaticResource FlatHeader}"/>
            <StackPanel Grid.Column="2" Grid.ColumnSpan="6" Orientation="Horizontal" Background="White">
                <GroupBox Header="Команда">
                    <TextBox Text="{Binding DataBytes, Converter={StaticResource BytesToStrConverter}, ValidatesOnDataErrors=True}" TabIndex="3"/>
                </GroupBox>
            </StackPanel>
            <Button Grid.Column="8"                     
                Content="Выдать"
                Command="{Binding IssueDataSend}" TabIndex="6"/>
        </Grid>
    </StackPanel>
</Window>
